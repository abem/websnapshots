# Web Snapshot Tool - 企画・要件定義

## プロジェクト概要

Webページのスクリーンショットを取得するCLIツールを開発する。

## 要件

### 基本要件
- Web URLを第一引数に受け取る
- 画面のスクリーンショットを保存する
- 適切なファイル名で出力する

### 実行環境
- Python 3.10+

## 技術選定

### 候補技術の比較

| ツール | 言語 | メンテナンス | 速度 | 導入の容易さ | 推奨度 |
|--------|------|--------------|------|-------------|--------|
| Playwright | Python | Active (Microsoft) | 高速 | 簡単 | **推奨** |
| Selenium | Python | Active | 中等 | やや複雑 | ○ |
| Pyppeteer | Python | 低活発 | 高速 | 簡単 | △ |

### 採用技術: Playwright for Python

**選定理由:**

1. **Microsoftによるアクティブな開発**: 安定したメンテナンスとドキュメント
2. **高速な実行**: Chrome DevTools Protocolを直接使用
3. **マルチブラウザ対応**: 今後の拡張性を考慮（今回はChromiumを使用）
4. **待機処理の優秀さ**: ページ読み込み完了の自動検出が賢い
5. **スクリーンショット機能の充実**: フルページ、特定要素のキャプチャ等
6. **Pythonネイティブ**: ユーザー要望に合致

### インストール予定パッケージ

```bash
pip install playwright
playwright install chromium
```

## 仕様策定

### ファイル名命名規則

```
{screenshot}-{timestamp}.png
```

- `screenshot`: 固定プレフィックス
- `timestamp`: ISO 8601形式（例: 20260213T151930）
- 拡張子: `.png`

**例:** `screenshot-20260213T151930.png`

**命名規則の理由:**
- 一意性を保証（タイムスタンプ付与）
- ファイル一覧での時系列ソートが容易
- 機械的読み取りが容易

### コマンドラインインターフェース

```bash
# 基本使用法
python web_snapshot.py <url>

# オプション機能（将来実装予定）
python web_snapshot.py <url> --width 1920 --height 1080
python web_snapshot.py <url> --full-page
python web_snapshot.py <url> --output my-screenshot.png
python web_snapshot.py <url> --wait 3000
```

### オプション機能仕様

| オプション | 説明 | デフォルト値 |
|-----------|------|-------------|
| `--width` | ウィンドウ幅(px) | 1920 |
| `--height` | ウィンドウ高さ(px) | 1080 |
| `--full-page` | フルページスクリーンショット | false |
| `--output` | 出力ファイル名指定 | 自動生成 |
| `--wait` | 待機時間(ms) | 自動検出 |

### スクリーンショット仕様

- **デフォルト**: ビューポートのみ（フルページではない）
- **解像度**: 1920x1080（デフォルト）
- **フォーマット**: PNG
- **保存先**: カレントディレクトリ

## 実装方針

### フェーズ1: 基本実装
1. Playwrightのセットアップ
2. URLを受け取り、スクリーンショットを保存
3. タイムスタンプ付きのファイル名で出力

### フェーズ2: エラーハンドリング
1. 不正なURLのバリデーション
2. ネットワークエラーの処理
3. ファイル保存エラーの処理

### フェーズ3: オプション機能
1. ウィンドウサイズ指定
2. フルページスクリーンショット
3. カスタム出力ファイル名

## 依存関係

```
web-snapshot/
├── requirements.txt   # Python依存パッケージ
├── web_snapshot.py    # メインスクリプト
└── screenshots/       # 出力ディレクトリ（オプション）
```

## 開発スケジュール

1. **企画・要件定義**（本フェーズ）
2. **基本実装**: Playwrightによるスクリーンショット取得
3. **エラーハンドリング**: バリデーションとエラー処理
4. **オプション機能**: コマンドライン引数の拡張
5. **テスト**: 各種URLでの動作確認
